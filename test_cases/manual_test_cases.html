<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cripto-Bot - Manual Test Cases</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            padding: 20px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .test-case {
            background: #fff;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .test-id {
            font-weight: bold;
            color: #2980b9;
        }
        .category {
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            display: inline-block;
            margin: 5px 0;
        }
        .precondition {
            background: #f1c40f;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
        }
        .steps {
            list-style-type: decimal;
            padding-left: 20px;
        }
        .expected {
            background: #2ecc71;
            color: white;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
        }
        .critical {
            color: #e74c3c;
            font-weight: bold;
        }
        .calculator-example {
            background: #34495e;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
        }
        .formula {
            background: #2c3e50;
            padding: 10px;
            border-radius: 3px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ü§ñ Cripto-Bot - Manual Test Cases</h1>

    <div class="test-case">
        <span class="test-id">TC-000: Validaci√≥n de C√°lculos</span>
        <div class="category">C√°lculos Cr√≠ticos</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Calculadora con 8 decimales</li>
                <li>Papel para notas</li>
                <li>Acceso a las operaciones del bot</li>
            </ul>
        </div>

        <h3>1. C√°lculo de Profit Target üìà</h3>
        <div class="calculator-example">
            <div class="formula">Target Price = Entry Price √ó (1 + Target%)</div>
            Ejemplo:
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Target: 1.5%</li>
                <li>C√°lculo: $40,000 √ó (1 + 0.015)</li>
                <li>Target Price = $40,600</li>
            </ul>
        </div>

        <h3>2. C√°lculo de Stop Loss üìâ</h3>
        <div class="calculator-example">
            <div class="formula">Stop Price = Entry Price √ó (1 - Stop%)</div>
            Ejemplo:
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Stop: 1%</li>
                <li>C√°lculo: $40,000 √ó (1 - 0.01)</li>
                <li>Stop Price = $39,600</li>
            </ul>
        </div>

        <h3>3. C√°lculo de Profit Real üí∞</h3>
        <div class="calculator-example">
            <div class="formula">Profit = (Exit Price - Entry Price) √ó Size - Fees</div>
            Ejemplo:
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Exit Price: $40,600</li>
                <li>Position Size: 0.1 BTC</li>
                <li>Fees: 0.6% √ó 2 (entrada y salida)</li>
                <li>C√°lculo:</li>
                <li>1. Profit Bruto = ($40,600 - $40,000) √ó 0.1 = $60</li>
                <li>2. Fees = ($40,000 √ó 0.1 √ó 0.006) + ($40,600 √ó 0.1 √ó 0.006) = $24 + $24.36 = $48.36</li>
                <li>3. Profit Neto = $60 - $48.36 = $11.64</li>
            </ul>
        </div>

        <h3>4. Validaci√≥n de Trailing Stop üîÑ</h3>
        <div class="calculator-example">
            <div class="formula">New Stop = Current Price √ó (1 - Trail%)</div>
            Ejemplo:
            <ul>
                <li>Entry: $40,000</li>
                <li>Trail: 1%</li>
                <li>Precio sube a $41,000:</li>
                <li>Nuevo Stop = $41,000 √ó 0.99 = $40,590</li>
                <li>Precio sube a $41,500:</li>
                <li>Nuevo Stop = $41,500 √ó 0.99 = $41,085</li>
            </ul>
        </div>

        <h3>5. Validaci√≥n de Position Size üìä</h3>
        <div class="calculator-example">
            <div class="formula">BTC Amount = USD Amount √∑ Current Price</div>
            Ejemplo 1 (Compra Simple):
            <ul>
                <li>Inversi√≥n: $1,000</li>
                <li>BTC Price: $40,000</li>
                <li>C√°lculo: $1,000 √∑ $40,000 = 0.025 BTC</li>
                <li>Fee Check: 0.025 √ó $40,000 √ó 0.006 = $6 (entrada)</li>
                <li>Cantidad Real: $1,000 - $6 = $994 disponibles</li>
                <li>BTC Final: $994 √∑ $40,000 = 0.02485 BTC</li>
            </ul>
            
            Ejemplo 2 (Compra con L√≠mites):
            <ul>
                <li>Balance: $5,000</li>
                <li>MAX_POSITION_SIZE: $1,000</li>
                <li>BTC Price: $40,000</li>
                <li>Fees: 0.6%</li>
                <li>C√°lculo M√°ximo Real:</li>
                <li>1. Fee Reserva = $1,000 √ó 0.006 = $6</li>
                <li>2. Cantidad Ajustada = $1,000 - $6 = $994</li>
                <li>3. BTC M√°ximo = $994 √∑ $40,000 = 0.02485 BTC</li>
            </ul>
        </div>

        <h3>6. Validaci√≥n de Profit Porcentual üìä</h3>
        <div class="calculator-example">
            <div class="formula">Profit% = ((Current Price - Entry Price) √∑ Entry Price) √ó 100</div>
            Ejemplo 1 (Profit):
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Current Price: $41,200</li>
                <li>C√°lculo: (($41,200 - $40,000) √∑ $40,000) √ó 100</li>
                <li>         = ($1,200 √∑ $40,000) √ó 100</li>
                <li>         = 0.03 √ó 100</li>
                <li>Profit = 3%</li>
            </ul>
            
            Ejemplo 2 (Loss):
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Current Price: $39,200</li>
                <li>C√°lculo: (($39,200 - $40,000) √∑ $40,000) √ó 100</li>
                <li>         = (-$800 √∑ $40,000) √ó 100</li>
                <li>         = -0.02 √ó 100</li>
                <li>Loss = -2%</li>
            </ul>
        </div>

        <h3>7. Validaci√≥n de Break-Even con Fees üíπ</h3>
        <div class="calculator-example">
            <div class="formula">Break-Even = Entry Price √ó (1 + (Fee% √ó 2))</div>
            Ejemplo Detallado:
            <ul>
                <li>Entry Price: $40,000</li>
                <li>Position Size: 0.1 BTC</li>
                <li>Fee Rate: 0.6%</li>
                <li>C√°lculos:</li>
                <li>1. Entry Fee = $40,000 √ó 0.1 √ó 0.006 = $24</li>
                <li>2. Future Exit Fee (at break-even) = $40,000 √ó 0.1 √ó 0.006 = $24</li>
                <li>3. Total Fees = $48</li>
                <li>4. Break-Even Price = $40,000 √ó (1 + (0.006 √ó 2))</li>
                <li>5. Break-Even = $40,480</li>
                <li>Verificaci√≥n:</li>
                <li>- Compra: 0.1 BTC a $40,000 + $24 fee = $4,024</li>
                <li>- Venta: 0.1 BTC a $40,480 - $24.29 fee = $4,023.71</li>
                <li>- Diferencia ‚âà $0 (break-even)</li>
            </ul>
        </div>

        <h3>8. Validaci√≥n de Daily Loss Limit üìâ</h3>
        <div class="calculator-example">
            <div class="formula">Remaining = DAILY_LOSS_LIMIT - Sum(Today's Losses)</div>
            Ejemplo con L√≠mite $50:
            <ul>
                <li>DAILY_LOSS_LIMIT = $50</li>
                <li>Trade 1: -$20 (p√©rdida)</li>
                <li>Trade 2: +$15 (ganancia)</li>
                <li>Trade 3: -$25 (p√©rdida)</li>
                <li>C√°lculos:</li>
                <li>1. P√©rdidas del d√≠a = -$20 - $25 = -$45</li>
                <li>2. Ganancias no afectan el l√≠mite</li>
                <li>3. Remaining = $50 - $45 = $5</li>
                <li>4. Pr√≥ximo trade m√°ximo posible = $5</li>
            </ul>
        </div>

        <div class="expected">
            <strong>Procedimiento de Validaci√≥n:</strong>
            <ol>
                <li>Para cada operaci√≥n, calcular manualmente los valores esperados</li>
                <li>Comparar con los valores mostrados por el bot</li>
                <li>Verificar que la diferencia sea < 0.01% (error de redondeo)</li>
                <li>Documentar cualquier discrepancia</li>
            </ol>
        </div>
    </div>

    <!-- Configuraci√≥n Inicial -->
    <div class="test-case">
        <span class="test-id">TC-001: Configuraci√≥n Inicial - API Keys</span>
        <div class="category">Configuraci√≥n</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Programa reci√©n instalado</li>
                <li>Tener API Key y Secret de Coinbase</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Abrir el programa</li>
            <li>Ir a la pesta√±a "Configuration"</li>
            <li>Click en ‚úèÔ∏è junto a API Key</li>
            <li>Pegar API Key completa</li>
            <li>Click en ‚úèÔ∏è junto a API Secret</li>
            <li>Pegar clave privada completa (con BEGIN/END)</li>
            <li>Click en "Save Configuration"</li>
            <li>Click en "Test API Connection"</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Mensaje de "Configuration saved successfully"</li>
                <li>Todos los endpoints muestran ONLINE</li>
                <li>Balance real se muestra correctamente</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-002: Verificaci√≥n de Profit Target</span>
        <div class="category">Trading Logic</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>API configurada y funcionando</li>
                <li>Modo SIMULATION activado</li>
                <li>No posiciones abiertas</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Ir a "Trading" tab</li>
            <li>Establecer Profit Target en 1.5%</li>
            <li>Establecer Stop Loss en 1%</li>
            <li>Establecer Position Size en $100</li>
            <li>Click en "Buy BTC"</li>
            <li>Esperar a que el precio suba 1.5%</li>
            <li>Verificar que se ejecuta venta autom√°tica</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Compra ejecutada al precio actual</li>
                <li>Target Price calculado correctamente (precio entrada + 1.5%)</li>
                <li>Venta autom√°tica cuando se alcanza target</li>
                <li>Profit registrado en hist√≥rico</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-003: Validaci√≥n de Stop Loss</span>
        <div class="category">Risk Management</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>API configurada y funcionando</li>
                <li>Modo SIMULATION activado</li>
                <li>No posiciones abiertas</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Ir a "Trading" tab</li>
            <li>Establecer Stop Loss en 1%</li>
            <li>Establecer Position Size en $100</li>
            <li>Click en "Buy BTC"</li>
            <li>Esperar a que el precio baje 1%</li>
            <li>Verificar que se ejecuta stop loss</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Stop Loss Price calculado correctamente (precio entrada - 1%)</li>
                <li>Venta autom√°tica cuando se alcanza stop loss</li>
                <li>P√©rdida limitada al 1%</li>
                <li>P√©rdida registrada en hist√≥rico</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-004: Persistencia de Datos</span>
        <div class="category">Database</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Programa con historial de trades</li>
                <li>Al menos 5 operaciones realizadas</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Realizar una operaci√≥n de compra</li>
            <li>Cerrar el programa completamente</li>
            <li>Reabrir el programa</li>
            <li>Verificar "Trading History"</li>
            <li>Verificar "Statistics" tab</li>
            <li>Verificar posici√≥n actual</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Todas las operaciones previas visibles</li>
                <li>Estad√≠sticas calculadas correctamente</li>
                <li>Posici√≥n actual restaurada con precio entrada correcto</li>
                <li>Balance hist√≥rico intacto</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-005: L√≠mites de Posici√≥n</span>
        <div class="category">Risk Management</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>API configurada y funcionando</li>
                <li>Modo LIVE activado</li>
                <li>Balance real disponible</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Ir a "Configuration" tab</li>
            <li>Establecer MAX_POSITION_SIZE en $100</li>
            <li>Ir a "Trading" tab</li>
            <li>Intentar comprar por $150</li>
            <li>Verificar mensaje de error</li>
            <li>Intentar comprar por $50</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Compra de $150 rechazada</li>
                <li>Mensaje claro indicando l√≠mite excedido</li>
                <li>Compra de $50 ejecutada correctamente</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-006: Auto-Trading Logic</span>
        <div class="category">Trading Logic</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Modo SIMULATION activado</li>
                <li>AUTO_BUY_ENABLED = true</li>
                <li>AUTO_SELL_ENABLED = true</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Establecer condiciones de compra autom√°tica</li>
            <li>Esperar se√±al de compra</li>
            <li>Verificar ejecuci√≥n autom√°tica</li>
            <li>Esperar alcanzar profit target</li>
            <li>Verificar venta autom√°tica</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Compra ejecutada seg√∫n condiciones</li>
                <li>Venta ejecutada al alcanzar target</li>
                <li>Logs muestran decisiones correctamente</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-007: Validaci√≥n de Balance</span>
        <div class="category">Risk Management</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Modo LIVE activado</li>
                <li>Balance real conocido</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Verificar balance inicial</li>
            <li>Realizar compra peque√±a</li>
            <li>Verificar balance actualizado</li>
            <li>Realizar venta</li>
            <li>Verificar balance final</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Balance siempre refleja operaciones</li>
                <li>Fees considerados en c√°lculos</li>
                <li>No discrepancias con Coinbase</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-008: Recuperaci√≥n de Errores</span>
        <div class="category">Error Handling</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Programa funcionando normalmente</li>
                <li>Posici√≥n abierta</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Desconectar internet</li>
            <li>Esperar reconexi√≥n autom√°tica</li>
            <li>Verificar estado de posici√≥n</li>
            <li>Verificar precio actual</li>
            <li>Verificar √≥rdenes pendientes</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Reconexi√≥n autom√°tica exitosa</li>
                <li>Estado de posici√≥n preservado</li>
                <li>√ìrdenes pendientes intactas</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-009: C√°lculo de Profit/Loss</span>
        <div class="category">Trading Logic</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>Historial de trades existente</li>
                <li>Al menos 10 operaciones</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Ir a "Statistics" tab</li>
            <li>Verificar c√°lculos de profit total</li>
            <li>Verificar profit por trade</li>
            <li>Verificar win rate</li>
            <li>Comparar con hist√≥rico manual</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Profits calculados correctamente</li>
                <li>Fees incluidos en c√°lculos</li>
                <li>Estad√≠sticas precisas</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <span class="test-id">TC-010: Modo Simulaci√≥n vs Live</span>
        <div class="category">Trading Modes</div>
        <div class="precondition">
            <strong>Precondiciones:</strong>
            <ul>
                <li>API configurada</li>
                <li>Balance real disponible</li>
            </ul>
        </div>
        <ol class="steps">
            <li>Cambiar a modo SIMULATION</li>
            <li>Realizar operaci√≥n de prueba</li>
            <li>Verificar que no afecta balance real</li>
            <li>Cambiar a modo LIVE</li>
            <li>Verificar advertencias</li>
        </ol>
        <div class="expected">
            <strong>Resultado Esperado:</strong>
            <ul>
                <li>Modo SIMULATION no afecta fondos reales</li>
                <li>Advertencias claras al cambiar a LIVE</li>
                <li>Separaci√≥n clara de balances</li>
            </ul>
        </div>
    </div>

    <!-- Continuar con m√°s casos de prueba... -->

</body>
</html>
